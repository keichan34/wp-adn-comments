window.ADN_CONFIG=window.ADN_CONFIG||{app_root_url:"https://adn-comments.s3.amazonaws.com",client_id:"q6BSdP5DctemahG9EDZVAmCv2x2dbjZJ",redirect_uri:"https://adn-comments.s3.amazonaws.com/auth.html",valid_config_keys:["comments_root","comments_url","default_at_reply","comments_origin","body_font_color","link_font_color","accent_color","font_family"]};var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=p.map,q=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,p.nodeIdCompat&&t.test(a[g])&&(a[g]=a[g].replace(t,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||q)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice,t=/\.js$/;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[],v=typeof h;if(i=i||c,"undefined"===v||"function"===v){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h?h.apply(n[c],u):void 0,c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){if("string"==typeof b)return m[b]?m[b](c):g(l(b,c).f);if(!b.splice){if(p=b,p.deps&&k(p.deps,p.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k},k.config=function(a){return k(a)},requirejs._defined=n,define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(a,b):this[a]=b()}("domready",function(a){function b(a){for(n=1;a=d.shift();)a()}var c,d=[],e=!1,f=document,g=f.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l="readyState",m=h?/^loaded|^c/:/^loaded|c/,n=m.test(f[l]);return f[j]&&f[j](i,c=function(){f.removeEventListener(i,c,e),b()},e),h&&f.attachEvent(k,c=function(){/^c/.test(f[l])&&(f.detachEvent(k,c),b())}),a=h?function(b){self!=top?n?b():d.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){n?a():d.push(a)}}),function(){function a(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function b(){}function c(b){function c(){if(f){var b=a(f);T.apply(b,arguments)}if(this instanceof c){var h=d(e.prototype),i=e.apply(h,b||arguments);return m(i)?i:h}return e.apply(g,b||arguments)}var e=b[0],f=b[2],g=b[4];return bb(c,b),c}function d(a){return m(a)?X(a):{}}function e(a,b,c){if("function"!=typeof a)return q;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(_.funcNames&&(d=!a.name),d=d||!_.funcDecomp,!d)){var e=R.call(a);_.funcNames||(d=!t.test(e)),d||(d=u.test(e),bb(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return p(a,b)}function f(b){function c(){var b=l?j:this;if(h){var r=a(h);T.apply(r,arguments)}if((i||o)&&(r||(r=a(arguments)),i&&T.apply(r,i),o&&r.length<k))return g|=16,f([e,p?g:-4&g,r,null,j,k]);if(r||(r=arguments),n&&(e=b[q]),this instanceof c){b=d(e.prototype);var s=e.apply(b,r);return m(s)?s:b}return e.apply(b,r)}var e=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=1&g,n=2&g,o=4&g,p=8&g,q=e;return bb(c,b),c}function g(b,d,e,h,i,j){var k=1&d,m=2&d,n=4&d,o=16&d,p=32&d;if(!m&&!l(b))throw new TypeError;o&&!e.length&&(d&=-17,o=e=!1),p&&!h.length&&(d&=-33,p=h=!1);var q=b&&b.__bindData__;if(q&&q!==!0)return q=a(q),q[2]&&(q[2]=a(q[2])),q[3]&&(q[3]=a(q[3])),!k||1&q[1]||(q[4]=i),!k&&1&q[1]&&(d|=8),!n||4&q[1]||(q[5]=j),o&&T.apply(q[2]||(q[2]=[]),e),p&&V.apply(q[3]||(q[3]=[]),h),q[1]|=d,g.apply(null,q);var r=1==d||17===d?c:f;return r([b,d,e,h,i,j])}function h(){H.shadowedProps=v,H.array=H.bottom=H.loop=H.top="",H.init="iterable",H.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)H[c]=a[c];var d=H.args;H.firstArg=/^[^,]+/.exec(d)[0];var f=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+ab(H)+"\n}");return f(e,A,M,S,s,j,cb,n,H.keys,N,I,$,F,O,P)}function i(a){return"function"==typeof a&&Q.test(a)}function j(a){return a&&"object"==typeof a&&"number"==typeof a.length&&P.call(a)==w||!1}function l(a){return"function"==typeof a}function m(a){return!(!a||!I[typeof a])}function n(a){return"string"==typeof a||a&&"object"==typeof a&&P.call(a)==F||!1}function o(a,b,c){if(b&&"undefined"==typeof c&&cb(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else hb(a,b,c);return a}function p(b,c){return arguments.length>2?g(b,17,a(arguments,2),null,c):g(b,1,null,null,c)}function q(a){return a}function r(){}var s={},t=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,v=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],w="[object Arguments]",x="[object Array]",y="[object Boolean]",z="[object Date]",A="[object Error]",B="[object Function]",C="[object Number]",D="[object Object]",E="[object RegExp]",F="[object String]",G={configurable:!1,enumerable:!1,value:null,writable:!1},H={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J=I[typeof window]&&window||this,K=I[typeof global]&&global;!K||K.global!==K&&K.window!==K||(J=K);var L=[],M=Error.prototype,N=Object.prototype,O=String.prototype,P=N.toString,Q=RegExp("^"+String(P).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),R=Function.prototype.toString,S=N.hasOwnProperty,T=L.push,U=N.propertyIsEnumerable,V=L.unshift,W=function(){try{var a={},b=i(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),X=i(X=Object.create)&&X,Y=i(Y=Array.isArray)&&Y,Z=i(Z=Object.keys)&&Z,$={};$[x]=$[z]=$[C]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$[y]=$[F]={constructor:!0,toString:!0,valueOf:!0},$[A]=$[B]=$[E]={constructor:!0,toString:!0},$[D]={constructor:!0},function(){for(var a=v.length;a--;){var b=v[a];for(var c in $)S.call($,c)&&!S.call($[c],b)&&($[c][b]=!1)}}();var _=b.support={};!function(){var a=function(){this.x=1},b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments);_.argsClass=P.call(arguments)==w,_.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),_.enumErrorProps=U.call(M,"message")||U.call(M,"name"),_.enumPrototypes=U.call(a,"prototype"),_.funcDecomp=!i(J.WinRTError)&&u.test(function(){return this}),_.funcNames="string"==typeof Function.name,_.nonEnumArgs=0!=d,_.nonEnumShadows=!/valueOf/.test(c),_.spliceObjects=(L.splice.call(b,0,1),!b[0]),_.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1);var ab=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",_.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):_.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),_.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),_.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(_.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),_.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",_.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||_.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};X||(d=function(){function a(){}return function(b){if(m(b)){a.prototype=b;var c=new a;a.prototype=null}return c||J.Object()}}());var bb=W?function(a,b){G.value=b,W(a,"__bindData__",G)}:r;_.argsClass||(j=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&S.call(a,"callee")&&!U.call(a,"callee")||!1});var cb=Y||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&P.call(a)==x||!1},db=h({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),eb=Z?function(a){return m(a)?_.enumPrototypes&&"function"==typeof a||_.nonEnumArgs&&a.length&&j(a)?db(a):Z(a):[]}:db,fb={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:eb,loop:"if (callback(iterable[index], index, collection) === false) return result"},gb={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:eb,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},hb=h(fb),ib=h(gb,{top:gb.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});l(/x/)&&(l=function(a){return"function"==typeof a&&P.call(a)==B}),b.assign=ib,b.bind=p,b.forEach=o,b.keys=eb,b.each=o,b.extend=ib,b.identity=q,b.isArguments=j,b.isArray=cb,b.isFunction=l,b.isObject=m,b.isString=n,b.noop=r,b.VERSION="2.4.1","function"==typeof define&&"object"==typeof define.amd&&define.amd&&define("lodash",function(){return b})}.call(this),!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(a,b):this[a]=b()}("messaging",function(){var a=window._||require("lodash"),b={xdomain:"*",ie:navigator.userAgent.toLowerCase().indexOf("msie")>-1,scrollToTop:!0},c=function(a,b,c,d){window.addEventListener?a.addEventListener(b,c,d):window.attachEvent&&a.attachEvent("on"+b,c)},d=function(c,d){this.settings=a.extend({},b,c),this.methods=d};d.prototype.handle=function(a){var b=!1;if("*"!==this.settings.xdomain){var c=new RegExp(this.settings.xdomain+"$");if(!a.origin)throw new Error("messageHandler( elem, e): There is no origin.  You are viewing the page from your file system.  Please run through a web server.");if(!a.origin.match(c))throw new Error("messageHandler( elem, e): The orgin "+a.origin+" doesn't match the responsiveiframe  xdomain "+this.settings.xdomain+".");b=!0}if("*"===this.settings.xdomain||b){var d=JSON.parse(a.data),e=d.method,f=d.args;if(!this.methods[e])throw new Error("Missing method "+e+" from handlers.");this.methods[e].apply(window,f)}return!1},d.prototype.send=function(a,b){if(window.parent.postMessage){var c={method:a,args:b};c=JSON.stringify(c),window.parent.postMessage(c,this.settings.target_url)}};var e=function(b,e){var f=new d(b,e);return window.postMessage&&c(window,"message",a.bind(f.handle,f),!1),f};return{initMessaging:e}}),function(){var a=require("lodash"),b=require("messaging"),c=window.location+"",d={comments_root:ADN_CONFIG.app_root_url,comments_url:c,comments_origin:c},e=ADN_CONFIG.valid_config_keys.join(" ");local_config=window.ADN_COMMENTS_CONFIG||{},d=a.extend({},d,local_config);var f={};a.forEach(d,function(a,b){e.indexOf(b)<0||(f[b]=encodeURIComponent(a))});var g=[];a.forEach(f,function(a,b){g.push(b+"="+a)}),g=g.join("&");var h=document.getElementById("adn-comments"),i=d.comments_root+"/index.html?"+g,j=document.createElement("iframe");j.style.width="100%",j.style.height="200px",j.style.border="none",j.frameborder="0",j.marginwidth="0",j.marginheight="0",j.scrolling="no",j.src=i;var k=h.parentNode;k.appendChild(j),b.initMessaging({xdomain:d.comments_root},{setHeight:function(a){j.style.height=a+"px"}})}();